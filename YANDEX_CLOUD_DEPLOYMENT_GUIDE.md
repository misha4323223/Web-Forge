# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Yandex Cloud

**–í–µ—Ä—Å–∏—è:** 2.0 (20 –¥–µ–∫–∞–±—Ä—è 2025)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Yandex Cloud –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Replit —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
2. [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Replit vs Yandex Cloud](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-replit-vs-yandex-cloud)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Cloud Function](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-cloud-function)
4. [YDB Serverless Database](#ydb-serverless-database)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Gigachat AI](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-gigachat-ai)
6. [–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–ø–æ—à–∞–≥–æ–≤—ã–π-–ø—Ä–æ—Ü–µ—Å—Å-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–æ—Ç–ª–∞–¥–∫–∞)
8. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–∑–∞—Ç—Ä–∞—Ç)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Replit + Yandex Cloud)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        mp-webstudio.ru                              ‚îÇ
‚îÇ                    (Reg.ru - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ                     ‚îÇ
                       ‚ñº                     ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Frontend (React)   ‚îÇ  ‚îÇ   Object Storage     ‚îÇ
        ‚îÇ  Vite + TypeScript   ‚îÇ  ‚îÇ  (mp-webstudio.ru)   ‚îÇ
        ‚îÇ  (—Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç)         ‚îÇ  ‚îÇ  (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã) ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ API –∑–∞–ø—Ä–æ—Å—ã
                       ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Cloud Function (Node.js)       ‚îÇ  ‚Üê –ì–õ–ê–í–ù–´–ô BACKEND
        ‚îÇ   index-ydb.js (3307 —Å—Ç—Ä–æ–∫)      ‚îÇ
        ‚îÇ   ‚Ä¢ /api/contact                 ‚îÇ
        ‚îÇ   ‚Ä¢ /api/order                   ‚îÇ
        ‚îÇ   ‚Ä¢ /api/giga-chat               ‚îÇ
        ‚îÇ   ‚Ä¢ /api/admin-login             ‚îÇ
        ‚îÇ   ‚Ä¢ /robokassa/*                 ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ              ‚îÇ                      ‚îÇ              ‚îÇ
        ‚ñº              ‚ñº                      ‚ñº              ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   YDB   ‚îÇ  ‚îÇ  Sberbank  ‚îÇ  ‚îÇ  Robokassa API   ‚îÇ  ‚îÇ Telegram ‚îÇ
   ‚îÇServerless‚îÇ  ‚îÇ Gigachat   ‚îÇ  ‚îÇ   (–ø–ª–∞—Ç–µ–∂–∏)      ‚îÇ  ‚îÇ  Bot     ‚îÇ
   ‚îÇDatabase ‚îÇ  ‚îÇ   API      ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ          ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    REPLIT (—Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)                      ‚îÇ
‚îÇ  - npm run dev (backend Express + frontend Vite)                   ‚îÇ
‚îÇ  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏                          ‚îÇ
‚îÇ  - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ñ–µ–ª–∞–µ–º–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Frontend Distribution (CDN)                       ‚îÇ
‚îÇ         ‚Ä¢ CloudFlare –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–±—ã—Å—Ç—Ä–µ–µ, –≥–ª–æ–±–∞–ª—å–Ω–æ)           ‚îÇ
‚îÇ         ‚Ä¢ Object Storage —Ç–æ–ª—å–∫–æ –∫–∞–∫ origin                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Cloud Function   ‚îÇ  ‚îÇ  Cache Layer     ‚îÇ
        ‚îÇ  (–æ—Å–Ω–æ–≤–Ω–æ–π API)   ‚îÇ  ‚îÇ  (Redis/Memcache)‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ        ‚îÇ         ‚îÇ          ‚îÇ
        ‚ñº        ‚ñº         ‚ñº          ‚ñº
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ YDB  ‚îÇ ‚îÇGigachat‚îÇRobokassa‚îÇTelegram ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Replit vs Yandex Cloud

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Replit | Yandex Cloud Function |
|----------|--------|------------------------|
| **–¶–µ–Ω–∞** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (limited) | Pay-as-you-go (–¥–µ—à–µ–≤–æ) |
| **–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞** | 2-3 —Å–µ–∫ | 0.5-1 —Å–µ–∫ (cold start) |
| **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** | 99% | 99.9% |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –ù–µ—Ç | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ –∫–æ–Ω—Å–æ–ª–∏ | Cloud Logging (–∑–∞–ø—Ä–æ—Å—ã) |
| **–ü–∞–º—è—Ç—å** | 512MB | 256MB-1GB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) |
| **Timeout** | 120 —Å–µ–∫ | 600 —Å–µ–∫ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) |
| **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** | Secrets tab | Settings ‚Üí Variables |
| **CI/CD** | –†—É—á–Ω–æ–π | –ú–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å |

---

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Cloud Function

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`yandex-cloud-function/index-ydb.js`)

```javascript
‚îå‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 1-62)
‚îÇ  ‚Ä¢ YDB Driver (–ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
‚îÇ  ‚Ä¢ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (crypto, nodemailer, pdfkit –∏ —Ç.–¥.)
‚îÇ
‚îú‚îÄ Handler (—Å—Ç—Ä–æ–∫–∏ 63-187)
‚îÇ  ‚Ä¢ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
‚îÇ  ‚Ä¢ –ü–∞—Ä—Å–∏–Ω–≥ body –∏ path
‚îÇ  ‚Ä¢ –†–æ—É—Ç–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ
‚îú‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (handleXXX —Ñ—É–Ω–∫—Ü–∏–∏)
‚îÇ  ‚îú‚îÄ handleContact() - —Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
‚îÇ  ‚îú‚îÄ handleOrder() - –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
‚îÇ  ‚îú‚îÄ handleCalculatorOrder() - –∑–∞–∫–∞–∑ –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
‚îÇ  ‚îú‚îÄ handleGigaChat() - Gigachat API
‚îÇ  ‚îú‚îÄ handleAdminLogin() - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ  ‚îú‚îÄ handleRobokassaResult() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ  ‚îî‚îÄ ...–µ—â—ë 10+ —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ
‚îú‚îÄ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ  ‚îú‚îÄ sendTelegramMessage()
‚îÇ  ‚îú‚îÄ sendTelegramNotification()
‚îÇ  ‚îú‚îÄ sendContractEmail()
‚îÇ  ‚îî‚îÄ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã PDF –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ
‚îî‚îÄ –ö–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∏ 3307+)
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```
yandex-cloud-function/
‚îú‚îÄ‚îÄ index.js                    # –ì–ª–∞–≤–Ω—ã–π handler
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ contact.js             # handleContact()
‚îÇ   ‚îú‚îÄ‚îÄ order.js               # handleOrder()
‚îÇ   ‚îú‚îÄ‚îÄ gigachat.js            # handleGigaChat()
‚îÇ   ‚îú‚îÄ‚îÄ admin.js               # handleAdminLogin()
‚îÇ   ‚îî‚îÄ‚îÄ robokassa.js           # handleRobokassaResult()
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ ydb.js                 # YDB Driver
‚îÇ   ‚îú‚îÄ‚îÄ telegram.js            # Telegram notifications
‚îÇ   ‚îú‚îÄ‚îÄ email.js               # Email sending
‚îÇ   ‚îú‚îÄ‚îÄ pdf.js                 # PDF generation
‚îÇ   ‚îî‚îÄ‚îÄ cache.js               # Token cache
‚îî‚îÄ‚îÄ package.json               # Dependencies
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- ‚úÖ –ú–µ–Ω—å—à–µ –±–∞–≥–∞ –Ω–∞ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- ‚úÖ –ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## üóÑÔ∏è YDB Serverless Database

### –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 42-61)
async function getYdbDriver() {
    const endpoint = process.env.YDB_ENDPOINT || 
        'grpcs://ydb.serverless.yandexcloud.net:2135';
    const database = process.env.YDB_DATABASE;
    
    const authService = getCredentialsFromEnv();
    ydbDriver = new Driver({ endpoint, database, authService });
    
    if (!(await ydbDriver.ready(10000))) {
        throw new Error('YDB driver failed to connect');
    }
    return ydbDriver;
}
```

### –¢–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å

**–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–¥–∞):**
- `orders` - –∑–∞–∫–∞–∑—ã —Å Robokassa
- `contacts` - –∑–∞—è–≤–∫–∏ —Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã
- `calculator_orders` - –∑–∞–∫–∞–∑—ã –∏–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
- `admin_sessions` - —Å–µ—Å—Å–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `additional_invoices` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—á–µ—Ç–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è YDB

**1. –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞:**
```sql
CREATE INDEX idx_orders_email ON orders (email);
CREATE INDEX idx_calculator_orders_phone ON calculator_orders (phone);
```

**2. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–∞—Ç–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü):**
```sql
CREATE TABLE orders (
    order_id UUID NOT NULL,
    created_date Date NOT NULL,
    email String,
    status String,
    PRIMARY KEY (created_date, order_id)
) PARTITION BY created_date;
```

**3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:**
```javascript
// –í lib/cache.js
const cache = new Map();
const CACHE_TTL = 300000; // 5 –º–∏–Ω—É—Ç

function getCached(key) {
    const entry = cache.get(key);
    if (!entry) return null;
    if (Date.now() > entry.expiry) {
        cache.delete(key);
        return null;
    }
    return entry.value;
}

function setCached(key, value) {
    cache.set(key, {
        value,
        expiry: Date.now() + CACHE_TTL
    });
}
```

---

## ü§ñ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Gigachat AI

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö:**
- Endpoint `/api/giga-chat` –≤ Replit –∏ Yandex Cloud
- –û–¥–∏–Ω–∞–∫–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ OAuth + Chat API
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –¢—Ä–µ–±—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```
YC CLI –∏–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud:

# Gigachat
GIGACHAT_KEY = "ZDY2ODkxYjUtZDBkNi00MTM4LWJjZDUtMzBkODc2N2NlNjk5OmM0YjkxZjNlLTM2YTYtNGEwNS1iODk5LWQyNGY1ODUxOGU1Yg=="
GIGACHAT_SCOPE = "GIGACHAT_API_PERS"

# –û—Å—Ç–∞–ª—å–Ω—ã–µ (—É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å)
TELEGRAM_BOT_TOKEN = "..."
TELEGRAM_CHAT_ID = "..."
ADMIN_EMAIL = "..."
ADMIN_PASSWORD = "..."
YDB_ENDPOINT = "grpcs://ydb.serverless.yandexcloud.net:2135"
YDB_DATABASE = "/ru-central1/b1g8ad42m6he.../etnxxxxxx"
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞)

**–î–æ–±–∞–≤–∏—Ç—å –≤ index.js (–≤ –Ω–∞—á–∞–ª–æ):**

```javascript
let gigaChatTokenCache = {
  token: null,
  expiresAt: 0
};

async function getGigaChatToken() {
  const now = Date.now();
  
  if (gigaChatTokenCache.token && gigaChatTokenCache.expiresAt > now) {
    console.log("‚úÖ Using cached GigaChat token (saves ~400ms)");
    return gigaChatTokenCache.token;
  }
  
  const gigachatKey = process.env.GIGACHAT_KEY;
  const gigachatScope = process.env.GIGACHAT_SCOPE || 'GIGACHAT_API_PERS';
  
  const authResponse = await fetch('https://ngw.devices.sberbank.ru:9443/api/v2/oauth', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
      'Accept': 'application/json',
      'Authorization': `Basic ${gigachatKey}`,
      'RqUID': crypto.randomUUID(),
    },
    body: `scope=${encodeURIComponent(gigachatScope)}`,
  });
  
  const authData = await authResponse.json();
  const expiresIn = authData.expires_in || 1800;
  
  gigaChatTokenCache = {
    token: authData.access_token,
    expiresAt: now + (expiresIn - 60) * 1000
  };
  
  return authData.access_token;
}

// –ò–∑–º–µ–Ω–∏—Ç—å –≤ handleGigaChat():
// const accessToken = authData.access_token;  <- –°–¢–ê–†–û
const accessToken = await getGigaChatToken();  // <- –ù–û–í–û
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ 300-500ms (40%)

---

## üì¶ –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞

```bash
# 1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Replit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω
# 2. –°–∫–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: Download as zip –∏–∑ Replit
# 3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É yandex-cloud-function/

cd yandex-cloud-function/

# 4. –û–±–Ω–æ–≤–∏—Ç—å package.json (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
npm install
```

**–¢–µ–∫—É—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏):**
```json
{
  "dependencies": {
    "ydb-sdk": "^5.0.0",
    "@aws-sdk/client-sesv2": "^3.700.0",
    "nodemailer": "^6.9.0",
    "pdfkit": "^0.15.0",
    "gigachat": "^1.0.0"  // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
  }
}
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Function –≤ Yandex Cloud

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å (–ª–µ–≥—á–µ)**

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://console.cloud.yandex.com/
2. Cloud Functions ‚Üí Create function
3. –ò–º—è: `mp-webstudio-api`
4. Runtime: `nodejs18`
5. Memory: `512 MB`
6. Timeout: `300 sec`

**–°–ø–æ—Å–æ–± 2: YC CLI (–±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)**

```bash
# 1. –õ–æ–≥–∏–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
yc auth login
yc config set project-id <YOUR_PROJECT_ID>

# 2. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
yc serverless function create \
  --name mp-webstudio-api \
  --description "MP WebStudio API"

# 3. –ü–æ–ª—É—á–∏—Ç—å ID —Ñ—É–Ω–∫—Ü–∏–∏
FUNC_ID=$(yc serverless function list --format json | jq -r '.[0].id')
echo "Function ID: $FUNC_ID"
```

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å**

1. Cloud Functions ‚Üí mp-webstudio-api ‚Üí Edit
2. Upload ZIP —Å –∫–æ–¥–æ–º (max 50MB)
3. Entrypoint: `index.handler`
4. Service Account: –≤—ã–±—Ä–∞—Ç—å (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å –ø—Ä–∞–≤–∞–º–∏ ydb.viewer, ydb.editor)
5. Environment variables ‚Üí Settings ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `GIGACHAT_KEY`
   - `GIGACHAT_SCOPE`
   - `YDB_ENDPOINT`
   - `YDB_DATABASE`
   - –∏ —Ç.–¥.

**–°–ø–æ—Å–æ–± 2: YC CLI**

```bash
# 1. –°–æ–∑–¥–∞—Ç—å Service Account
yc iam service-account create --name mp-webstudio-sa

# 2. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏
yc resource-manager folder add-access-binding <FOLDER_ID> \
  --role ydb.viewer \
  --service-account-name mp-webstudio-sa

yc resource-manager folder add-access-binding <FOLDER_ID> \
  --role ydb.editor \
  --service-account-name mp-webstudio-sa

# 3. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–∏
yc serverless function version create \
  --function-name mp-webstudio-api \
  --runtime nodejs18 \
  --entrypoint index.handler \
  --memory 512m \
  --execution-timeout 300s \
  --source-path ./yandex-cloud-function.zip \
  --service-account-id <SERVICE_ACCOUNT_ID> \
  --environment GIGACHAT_KEY="..." \
  --environment GIGACHAT_SCOPE="GIGACHAT_API_PERS" \
  --environment YDB_ENDPOINT="..." \
  --environment YDB_DATABASE="..."
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ (API Gateway)

**–°–æ–∑–¥–∞—Ç—å HTTP —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏:**

```bash
# 1. –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å: Function ‚Üí Triggers ‚Üí Create trigger
#    Type: HTTP
#    Method: Any
#    Path: /
#    Function: mp-webstudio-api
#    Service Account: –≤—ã–±—Ä–∞—Ç—å

# 2. –ü–æ–ª—É—á–∏—Ç—å URL —Ñ—É–Ω–∫—Ü–∏–∏ (–±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫):
# https://functions.yandexcloud.net/<FUNCTION_ID>/

# 3. –û–±–Ω–æ–≤–∏—Ç—å API_URL –≤ frontend:
# client/src/lib/queryClient.ts
const API_BASE = 'https://functions.yandexcloud.net/<FUNCTION_ID>';
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–û–±–Ω–æ–≤–∏—Ç—å `client/src/lib/queryClient.ts`:**

```typescript
// –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
const isDev = process.env.NODE_ENV === 'development';
const API_BASE = isDev 
  ? 'http://localhost:5173/api'  // –õ–æ–∫–∞–ª—å–Ω—ã–π Replit
  : 'https://functions.yandexcloud.net/<FUNCTION_ID>';  // Yandex Cloud

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
const API_BASE = import.meta.env.VITE_API_URL || 'http://localhost:5173/api';
```

**–î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:**

```env
# Development
VITE_API_URL=http://localhost:5173/api

# Production (–¥–ª—è —Å–±–æ—Ä–∫–∏ –Ω–∞ CI/CD)
# VITE_API_URL=https://functions.yandexcloud.net/<FUNCTION_ID>
```

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Replit:**

```bash
npm run dev
# –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:5173
# –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –∫–æ–Ω—Å–æ–ª—å (F12)
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ AI —á–∞—Ç
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ Network tab
```

**–ù–∞ Yandex Cloud:**

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
curl -X POST https://functions.yandexcloud.net/<FUNCTION_ID>/api/giga-chat \
  -H "Content-Type: application/json" \
  -d '{"message": "–ü—Ä–∏–≤–µ—Ç!"}'

# –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
# {"success": true, "response": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?..."}
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏:**

```bash
# –ß–µ—Ä–µ–∑ YC CLI
yc serverless function logs mp-webstudio-api --follow

# –ò–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud:
# Cloud Functions ‚Üí mp-webstudio-api ‚Üí Logs
# –§–∏–ª—å—Ç—Ä –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ severity
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞):**

```javascript
// –í–º–µ—Å—Ç–æ console.log()
const log = (level, message, data = {}) => {
  console.log(JSON.stringify({
    timestamp: new Date().toISOString(),
    level,  // DEBUG, INFO, WARN, ERROR
    message,
    ...data,
    requestId: context.requestId  // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
  }));
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
log('INFO', 'GigaChat request', { model: 'GigaChat', messageLength: message.length });
log('ERROR', 'Auth failed', { status: 401, endpoint: 'oauth' });
```

### 2. –ú–µ—Ç—Ä–∏–∫–∏

**–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (latency)
- –ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–¥–ª—è Gigachat)
- –û—à–∏–±–∫–∏ –ë–î

**Yandex Cloud Dashboard:**

```bash
# –°–æ–∑–¥–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –≥—Ä–∞—Ñ–∏–∫:
# Monitoring ‚Üí Dashboards ‚Üí Create
# Metrics:
#   - function.duration (–≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
#   - function.errors (–æ—à–∏–±–∫–∏)
#   - function.calls (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤)
```

### 3. –ê–ª–µ—Ä—Ç—ã

**–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):**

```bash
# –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:
# Monitoring ‚Üí Alerts ‚Üí Create alert
# Condition: function.errors > 10 –∑–∞ 1 –º–∏–Ω—É—Ç—É
# Notification Channel: Telegram / Email
```

---

## üí∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç

### –¢–µ–∫—É—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã

**–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –º–µ—Å—è—Ü (–ø—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ):**

```
Cloud Function:
  - 1,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å √ó 30 –¥–Ω–µ–π = 30,000 –∑–∞–ø—Ä–æ—Å–æ–≤
  - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2-3 —Å–µ–∫ (—Å—Ä–µ–¥–Ω–µ–µ)
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.16 –≤ –º–µ—Å—è—Ü (–ø–µ—Ä–≤—ã–µ 2,000,000 –∑–∞–ø—Ä–æ—Å–æ–≤ = –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

YDB Serverless:
  - Read units: ~1 –º–ª–Ω/–º–µ—Å—è—Ü = $0.25
  - Write units: ~0.5 –º–ª–Ω/–º–µ—Å—è—Ü = $0.05
  - Storage: ~1GB = $0.25

Outgoing traffic:
  - ~10GB/–º–µ—Å—è—Ü √ó $0.12 = $1.20

–ò–¢–û–ì–û: ~$1.90 - $2.50 –≤ –º–µ—Å—è—Ü (–æ—á–µ–Ω—å –¥–µ—à–µ–≤–æ!)
```

### –ö–∞–∫ —Å–Ω–∏–∑–∏—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã –µ—â—ë –±–æ–ª—å—à–µ

**1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–∂–µ –æ–ø–∏—Å–∞–Ω–æ):**
   - –ö–µ—à OAuth —Ç–æ–∫–µ–Ω–∞ = -40% –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ö–µ—à Gigachat –æ—Ç–≤–µ—Ç–æ–≤ = -80% –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

**2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ YDB:**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è
   - –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
   - –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

**3. CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (—É–∂–µ –µ—Å—Ç—å Object Storage):**
   - CloudFlare (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Å–∞–π—Ç–æ–≤)
   - –°–Ω–∏–∑–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Function

**4. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å timeout –¥–ª—è Gigachat:**
   - –°–µ–π—á–∞—Å: 300 —Å–µ–∫ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ)
   - –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 30-60 —Å–µ–∫ (abort request)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `GIGACHAT_KEY` –∏ `GIGACHAT_SCOPE` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `YDB_ENDPOINT` –∏ `YDB_DATABASE`
- [ ] –°–æ–∑–¥–∞—Ç—å Service Account —Å –Ω—É–∂–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTP —Ç—Ä–∏–≥–≥–µ—Ä
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API_URL –≤ frontend
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `/api/giga-chat` endpoint
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Cloud Logging
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –¥–ª—è –æ—à–∏–±–æ–∫
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å URL —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
cd yandex-cloud-function
zip -r function.zip . -x "node_modules/*" ".git/*"

# 2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ YC CLI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
yc serverless function version create \
  --function-name mp-webstudio-api \
  --runtime nodejs18 \
  --entrypoint index.handler \
  --memory 512m \
  --source-path ./function.zip \
  --environment GIGACHAT_KEY="${GIGACHAT_KEY}" \
  --environment YDB_ENDPOINT="${YDB_ENDPOINT}" \
  --environment YDB_DATABASE="${YDB_DATABASE}"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
curl https://functions.yandexcloud.net/<FUNC_ID>/api/health
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Yandex Cloud Functions](https://cloud.yandex.com/docs/functions/)
- [YDB](https://ydb.tech/docs/ru/)
- [Gigachat API](https://developers.sber.ru/docs/ru/gigachat/api/overview)

### –ü—Ä–∏–º–µ—Ä—ã
- [YC Examples - YDB + Functions](https://github.com/yandex-cloud-examples/yc-ydb-connect-from-serverless-function)
- [Gigachat JS SDK](https://github.com/ai-forever/gigachat-js)

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- Yandex Cloud Forum: https://cloud.yandex.com/docs/support
- Slack —Å–æ–æ–±—â–µ—Å—Ç–≤–æ: https://slack.cloud.yandex.com

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- üü¢ Gigachat AI –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- üü¢ Cloud Function —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- üü° –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ OAuth —Ç–æ–∫–µ–Ω–∞ (—ç–∫–æ–Ω–æ–º–∏—Ç 40% –≤—Ä–µ–º–µ–Ω–∏)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. –°–æ–∑–¥–∞—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ YDB (–∏–Ω–¥–µ–∫—Å—ã, –±–∞—Ç—á–∏–Ω–≥)
5. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –≤ –ë–î (–≤–º–µ—Å—Ç–æ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Yandex Cloud –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, Replit —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
