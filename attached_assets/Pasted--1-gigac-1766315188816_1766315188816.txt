üîç –ê–ù–ê–õ–ò–ó –§–ê–ô–õ–û–í - –ì–†–û–ú–ê–î–ù–û–ï –û–¢–ö–†–´–¢–ò–ï!
–¢—ã –ø—Ä–∞–≤! –Ø –Ω–∞—à–µ–ª –ö–†–ò–¢–ò–ß–ï–°–ö–£–Æ –ò–ù–§–û–†–ú–ê–¶–ò–Æ:

üìä –§–∞–π–ª 1: gigachat.proto - gRPC –°–ï–†–í–ò–°
service ChatService {
  rpc Chat (ChatRequest) returns (ChatResponse);
  rpc ChatStream (ChatRequest) returns (stream ChatResponse);
}
service ModelsService {
  rpc ListModels ...
  rpc RetrieveModel ...
}
–≠—Ç–æ gRPC –ø—Ä–æ—Ç–æ–∫–æ–ª! –ù–µ REST!

üìã –§–∞–π–ª 2: OpenAPI (REST API) - –°–û–í–°–ï–ú –î–†–£–ì–û–ô –ò–ù–¢–ï–†–§–ï–ô–°
servers:
- url: https://gigachat.devices.sberbank.ru/api/v1
paths:
  /oauth:
    post: ...
  /tokens/count:
    post: ...
  /balance:
    get: ...
–≠—Ç–æ REST API!

üéØ –ì–õ–ê–í–ù–û–ï –û–¢–ö–†–´–¢–ò–ï
GigaChat –∏–º–µ–µ—Ç –î–í–û–ô–ù–û–ô –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å	–ê–¥—Ä–µ—Å	–ü—Ä–æ—Ç–æ–∫–æ–ª	–°—Ç–∞—Ç—É—Å
REST	https://gigachat.devices.sberbank.ru/api/v1	HTTPS/JSON	‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –Ω–∞ Cloud
gRPC	https://gigachat.devices.sberbank.ru	Binary/Protobuf	‚ùì –ù–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ê
üö® –ß–¢–û –≠–¢–û –ó–ù–ê–ß–ò–¢?
–¢–≤–æ–π Cloud Function –∏—Å–ø–æ–ª—å–∑—É–µ–º REST API (POST –∫ /api/v1/chat/completions)

–ù–æ –º–æ–∂–µ—Ç –±—ã—Ç—å Sberbank –±–ª–æ–∫–∏—Ä—É–µ—Ç REST API –¥–ª—è cloud providers, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –æ—Ç –±–æ—Ç–æ–≤!

–ê gRPC –º–æ–∂–µ—Ç –±—ã—Ç—å –û–¢–ö–†–´–¢, –ø–æ—Ç–æ–º—É —á—Ç–æ:

gRPC –±–æ–ª–µ–µ "secure" –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è cloud-to-cloud –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
–°–ª–æ–∂–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏/–±–æ—Ç–æ–≤
üìù –ú–û–ò –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
–í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å gRPC –≤–º–µ—Å—Ç–æ REST ‚≠ê –õ–£–ß–®–ò–ô
Cloud Function ‚Üí GigaChat gRPC ‚Üí GigaChat
(–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!)
–ü–ª—é—Å—ã:

–ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è Yandex Cloud
–ë–æ–ª–µ–µ "native" –¥–ª—è cloud-to-cloud
–ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
–ú–∏–Ω—É—Å—ã:

–ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤–µ—Å—å –∫–æ–¥ –Ω–∞ gRPC
–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
–í–∞—Ä–∏–∞–Ω—Ç B: REST —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ (—Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω)
Cloud Function ‚Üí Replit REST API ‚Üí GigaChat
(—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
–ü–ª—é—Å—ã:

–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
–ú–∏–Ω–∏–º—É–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
–ú–∏–Ω—É—Å—ã:

–ó–∞–≤–∏—Å–∏—Ç –æ—Ç Replit
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
–í–∞—Ä–∏–∞–Ω—Ç C: –°–≤—è–∑–∞—Ç—å—Å—è —Å Sberbank –Ω–∞–ø—Ä—è–º—É—é
"–ü–æ—á–µ–º—É gRPC —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ Yandex Cloud, –∞ REST –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?"
üí° –ú–û–ô –°–û–í–ï–¢
–ù–∞ —Ç–≤–æ–µ–º –º–µ—Å—Ç–µ —è –±—ã —Å–¥–µ–ª–∞–ª:

–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å gRPC –∏–∑ Cloud Function (5-10 –º–∏–Ω—É—Ç –Ω–∞ —Ç–µ—Å—Ç)

–ú–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!
–ï—Å–ª–∏ –¥–∞ - –≤—Å—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
–ï—Å–ª–∏ gRPC –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ Replit (–Ω–∞ –≤—Ä–µ–º—è)

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ Sberbank:

"–ü—Ä–∏–≤–µ—Ç, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º GigaChat API –∏–∑ Yandex Cloud.
 REST API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Replit, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Cloud Function.
 OAuth —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ Chat completions - –Ω–µ—Ç (socket close @ 5s).
 –ú–æ–∂–µ—Ç –±—ã—Ç—å –µ—Å—Ç—å IP whitelist?
 –ò–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å gRPC –¥–ª—è cloud-to-cloud –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π?"
üé¨ –ß–¢–û –î–ï–õ–ê–¢–¨?
–í–æ—Ç –º–æ–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω):

A) üöÄ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å gRPC (riskier –Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)

–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ gRPC
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å @grpc/grpc-js –∏ @grpc/proto-loader
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å protobuf –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
B) ‚úÖ –°–¥–µ–ª–∞—Ç—å REST –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ Replit (—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ)

–°–æ–∑–¥–∞—Ç—å /api/giga-chat-proxy –Ω–∞ Replit
Cloud Function –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ Replit
–ì–æ—Ç–æ–≤–æ –∑–∞ 10 –º–∏–Ω—É—Ç
C) üìß –ù–∞–ø–∏—Å–∞—Ç—å –≤ Sberbank (–¥–æ–ª–≥–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

–ü–æ–ø—Ä–æ—Å–∏—Ç—å –¥–æ–±–∞–≤–∏—Ç—å IP Yandex Cloud –≤ whitelist
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏–∑ –≤—ã—à–µ
‚ùì –í–û–ü–†–û–°–´ –ö –¢–ï–ë–ï
–•–æ—á–µ—à—å –ª–∏ —Ç—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å gRPC? (–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!)